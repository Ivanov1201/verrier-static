(this.webpackJsonpdemo1=this.webpackJsonpdemo1||[]).push([[11],{1597:function(e,t,a){"use strict";a.r(t);var n=a(16),l=a(18),r=a(34),i=a(33),s=a(0),o=a.n(s),d=a(73),c=a(36),u=a(53),m=a(1189),v=a(405),f=a(1192),h=a(1186),g=a(68),p=a(179),b=a(195),y=a(196),w=a(59),E=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).state={treeTableConfig:{},startingPage:1,rowCount:null,initialPageSize:10,tableHeaders:[{id:"current_tree_count",classNames:"",style:{width:80},value:"Trees to be planted"},{id:"createdAt",classNames:"",style:{width:80},value:"Commission date",cell:{render:function(e){return o.a.createElement("div",{className:"d-flex flex-column"},o.a.createElement("div",{className:"my-1"},g(e).fromNow()),o.a.createElement("div",{className:"my-1"},g(e).format("YYYY-DD-MM HH:mm")))}}},{id:"createdAt",classNames:"",style:{width:80},value:"Commissioned By",cell:{render:function(e,t){var a,n,l,r,i;return(null===t||void 0===t?void 0:t.planter)?o.a.createElement("div",{className:"d-flex flex-column"},o.a.createElement("div",{className:"my-1"},null!==(a=null===t||void 0===t||null===(n=t.planter)||void 0===n?void 0:n.attached_name)&&void 0!==a?a:"Unnamed"),o.a.createElement("div",{className:"my-1"},o.a.createElement(y.a,{address:null===t||void 0===t||null===(l=t.planter)||void 0===l?void 0:l.address}))):(null===t||void 0===t?void 0:t.launchpad)?null===t||void 0===t||null===(r=t.launchpad)||void 0===r?void 0:r.name:(null===t||void 0===t?void 0:t.airdrop)?null===t||void 0===t||null===(i=t.airdrop)||void 0===i?void 0:i.name:"Verrier Swap"}}},{id:"last_plantation",classNames:"",style:{width:80},value:"Last Plantation",cell:{render:function(e){return e?g(e).fromNow():"No plantations yet"}}},{id:"actions",classNames:"",style:{width:50},value:"Actions",cell:{render:function(e,t){return o.a.createElement(v.a,{variant:"primary",disabled:0===parseInt(null===t||void 0===t?void 0:t.current_tree_count,10),onClick:function(){return l.plantTree(null===t||void 0===t?void 0:t.id)}},o.a.createElement("i",{className:"fa fa-tree"})," Plant")}}}],data:[]},l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.refreshTreeList()}},{key:"refreshTreeList",value:function(){return this.getAllTreesOfASingleWallet({limit:this.state.initialPageSize,offset:(this.state.startingPage-1)*this.state.initialPageSize})}},{key:"getAllTreesOfASingleWallet",value:function(e){var t=this,a=e.limit,n=e.offset;return(new w.d).getOneWalletTrees(this.props.wallet,{limit:a,offset:n}).then((function(e){return t.setState({data:e.data.data,rowCount:e.data.rowCount}),Promise.resolve(!0)}))}},{key:"onPaginationChanges",value:function(e){this.getAllTreesOfASingleWallet({limit:e.pageSize,offset:e.pageSize*(e.page-1)})}},{key:"plantTree",value:function(e){var t=this;return(new w.d).plantASingleTree(e).then((function(e){var a;return t.props.showModal({header:"Operation success",body:o.a.createElement("div",null,"".concat(null!==(a=e.data.treeCount)&&void 0!==a?a:0,"Trees has been planted"))}),t.refreshTreeList(),Promise.resolve(!0)})).catch((function(e){return console.log(e),t.props.showModal({header:"Operation Failed",body:o.a.createElement("div",null,"Please refresh the page and try again : ",o.a.createElement("p",null,e.message))}),Promise.reject(e)}))}},{key:"render",value:function(){var e,t=this,a=this.state,n=a.tableHeaders,l=a.data,r=a.rowCount;return o.a.createElement("div",null,o.a.createElement(b.a,{tableConfig:{headers:n,initialPageSize:10,startingPage:1},rowCount:r,onPaginationChanges:function(e){return t.onPaginationChanges(e)},data:null===(e=l[0])||void 0===e?void 0:e.trees}))}}]),a}(o.a.Component),N=Object(c.b)((function(e){return{globalModal:e.globalModal,visibleModal:Object(d.c)(e.alerts)}}),{closeModal:u.a,showModal:u.b})(E),P=function(e){Object(r.a)(a,e);var t=Object(i.a)(a);function a(e){var l;return Object(n.a)(this,a),(l=t.call(this,e)).state={globalVars:null,startingPage:1,key:"trees",initialPageSize:10,rowCount:null,tableHeaders:[{id:"wallet",classNames:"",style:{width:80},value:"Wallet",cell:{render:function(e){return o.a.createElement(y.a,{address:e})}}},{id:"unplanted_trees",classNames:"",style:{width:80},value:"UnPlanted trees"},{id:"planted_trees",classNames:"",style:{width:80},value:"Planted Trees"},{id:"last_plantation",classNames:"",style:{width:80},value:"Last Plantation",cell:{render:function(e){return e?g(e).fromNow():"No plantations yet"}}},{id:"actions",classNames:"",style:{width:50},value:"Actions",cell:{render:function(e,t){return o.a.createElement(m.a,null,o.a.createElement(v.a,{className:"m-1",variant:"primary",disabled:0===parseInt(null===t||void 0===t?void 0:t.unplanted_trees,10),onClick:function(){return Object(p.a)((function(){return l.plantTree(null===t||void 0===t?void 0:t.wallet)}),{body:"You are about plant all ".concat(null===t||void 0===t?void 0:t.unplanted_trees," trees for this wallet")})}},o.a.createElement("i",{className:"fa fa-tree"})," Plant"),o.a.createElement(v.a,{className:"m-1",variant:"primary",onClick:function(){return l.openSingleTreesModal(null===t||void 0===t?void 0:t.wallet)}},o.a.createElement("i",{className:"fa fa-list"})," List"))}}}]},l}return Object(l.a)(a,[{key:"componentDidMount",value:function(){this.refreshTreeList()}},{key:"refreshTreeList",value:function(){return this.getAllTrees({limit:this.state.initialPageSize,offset:(this.state.startingPage-1)*this.state.initialPageSize})}},{key:"getAllTrees",value:function(e){var t=this,a=e.limit,n=e.offset;return(new w.d).getAllTrees({limit:a,offset:n}).then((function(e){return t.setState({data:e.data.data,rowCount:e.data.rowCount}),Promise.resolve(!0)}))}},{key:"plantTree",value:function(e){var t=this;return(new w.d).plantATreeByWalletAddress(e).then((function(e){var a,n;return t.props.showModal({header:"Operation success",body:o.a.createElement("div",null,"".concat(null!==(a=null===(n=e.data.urls)||void 0===n?void 0:n.length)&&void 0!==a?a:0,"Trees has been planted"))}),t.refreshTreeList(),Promise.resolve(!0)})).catch((function(e){return console.log(e),t.props.showModal({header:"Operation Failed",body:o.a.createElement("div",null,"Please refresh the page and try again : ",o.a.createElement("p",null,e.message))}),Promise.reject(e)}))}},{key:"openSingleTreesModal",value:function(e){this.props.showModal({header:"Showing all trees of ".concat(e),body:o.a.createElement(N,{wallet:e}),globalModalStyle:{width:"50vw",maxWidth:"60vw",minWidth:"300px",margin:"auto"},fade:!0})}},{key:"onPaginationChanges",value:function(e){console.log(e),this.getAllTrees({limit:e.pageSize,offset:e.pageSize*(e.page-1)})}},{key:"render",value:function(){var e=this,t=this.state,a=t.tableHeaders,n=t.data,l=t.rowCount;return o.a.createElement("div",{className:"p-1"},o.a.createElement("div",{className:"card card-custom "},o.a.createElement("div",{className:"card-header border-0 py-5"},o.a.createElement("h3",{className:"card-title align-items-start flex-column"},o.a.createElement("span",{className:"card-label font-weight-bolder text-dark"},"Tree List"),o.a.createElement("span",{className:"text-muted mt-3 font-weight-bold font-size-sm"},"A management page for the trees and tree planting"))),o.a.createElement("div",{className:"card-body py-0"},o.a.createElement(f.a,{id:"controlled-tab-example",activeKey:this.state.key,onSelect:function(t){return e.setState({key:t})}},o.a.createElement(h.a,{eventKey:"trees",title:"Trees List"},o.a.createElement(b.a,{tableConfig:{headers:a,initialPageSize:10,startingPage:1},rowCount:l,onPaginationChanges:function(t){return e.onPaginationChanges(t)},data:n})))),o.a.createElement("div",{className:"card-footer d-flex"})))}}]),a}(o.a.Component),T=Object(c.b)((function(e){return{globalModal:null===e||void 0===e?void 0:e.globalModal,visibleModal:Object(d.c)(null===e||void 0===e?void 0:e.alerts)}}),{closeModal:u.a,showModal:u.b})(P);t.default=T}}]);
//# sourceMappingURL=11.2ca45879.chunk.js.map